{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nconst dateTime = document.querySelector('#datetime-picker');\nconst btnStart = document.querySelector('button[data-start]');\nconst timerDays = document.querySelector('span[data-days]');\nconst timerHours = document.querySelector('span[data-hours]');\nconst timerMinutes = document.querySelector('span[data-minutes]');\nconst timerSeconds = document.querySelector('span[data-seconds]');\n\nbtnStart.addEventListener('click', btnHandleClick);\nlet userSelectedDate = null;\nbtnStart.disabled = true;\n\nfunction btnHandleClick() {\n  let intervalId = null;\n  btnStart.disabled = true;\n  dateTime.disabled = true;\n  btnStart.classList.remove('btn-is-active');\n\n  intervalId = setInterval(() => {\n    const currentTime = Date.now();\n    const deltaTime = userSelectedDate - currentTime;\n    if (deltaTime < 1000) {\n      btnStart.disabled = false;\n      dateTime.disabled = false;\n      clearInterval(intervalId);\n      timerSeconds.textContent = '00';\n      return;\n    }\n    const time = convertMs(deltaTime);\n    updateTimerFace(time);\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = padStart(Math.floor(ms / day));\n  const hours = padStart(Math.floor((ms % day) / hour));\n  const minutes = padStart(Math.floor(((ms % day) % hour) / minute));\n  const seconds = padStart(Math.floor((((ms % day) % hour) % minute) / second));\n\n  console.log({ days, hours, minutes, seconds });\n  return { days, hours, minutes, seconds };\n}\n\nfunction padStart(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction updateTimerFace({ days, hours, minutes, seconds }) {\n  timerDays.textContent = `${days}`;\n  timerHours.textContent = `${hours}`;\n  timerMinutes.textContent = `${minutes}`;\n  timerSeconds.textContent = `${seconds}`;\n}\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const dateNow = Date.now();\n    const userDate = selectedDates[0];\n    const userDateMs = userDate.getTime();\n    if (dateNow > userDateMs) {\n      btnStart.disabled = true;\n      btnStart.classList.remove('btn-is-active');\n      return alert('Please choose a date in the future');\n    } else {\n      btnStart.disabled = false;\n      btnStart.classList.add('btn-is-active');\n      userSelectedDate = userDateMs;\n    }\n  },\n};\n\nflatpickr(dateTime, options);\n"],"names":["dateTime","btnStart","timerDays","timerHours","timerMinutes","timerSeconds","btnHandleClick","userSelectedDate","intervalId","currentTime","deltaTime","time","convertMs","updateTimerFace","ms","days","padStart","hours","minutes","seconds","value","options","selectedDates","dateNow","userDateMs","flatpickr"],"mappings":"mIAGA,MAAMA,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAEhEJ,EAAS,iBAAiB,QAASK,CAAc,EACjD,IAAIC,EAAmB,KACvBN,EAAS,SAAW,GAEpB,SAASK,GAAiB,CACxB,IAAIE,EAAa,KACjBP,EAAS,SAAW,GACpBD,EAAS,SAAW,GACpBC,EAAS,UAAU,OAAO,eAAe,EAEzCO,EAAa,YAAY,IAAM,CAC7B,MAAMC,EAAc,KAAK,MACnBC,EAAYH,EAAmBE,EACrC,GAAIC,EAAY,IAAM,CACpBT,EAAS,SAAW,GACpBD,EAAS,SAAW,GACpB,cAAcQ,CAAU,EACxBH,EAAa,YAAc,KAC3B,MACD,CACD,MAAMM,EAAOC,EAAUF,CAAS,EAChCG,EAAgBF,CAAI,CACrB,EAAE,GAAI,CACT,CAEA,SAASC,EAAUE,EAAI,CAMrB,MAAMC,EAAOC,EAAS,KAAK,MAAMF,EAAK,KAAG,CAAC,EACpCG,EAAQD,EAAS,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAC9CI,EAAUF,EAAS,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EAC3DK,EAAUH,EAAS,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAE5E,eAAQ,IAAI,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAAE,EACtC,CAAE,KAAAJ,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASH,EAASI,EAAO,CACvB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASP,EAAgB,CAAE,KAAAE,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1DjB,EAAU,YAAc,GAAGa,CAAI,GAC/BZ,EAAW,YAAc,GAAGc,CAAK,GACjCb,EAAa,YAAc,GAAGc,CAAO,GACrCb,EAAa,YAAc,GAAGc,CAAO,EACvC,CAEA,MAAME,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAU,KAAK,MAEfC,EADWF,EAAc,CAAC,EACJ,UAC5B,GAAIC,EAAUC,EACZ,OAAAvB,EAAS,SAAW,GACpBA,EAAS,UAAU,OAAO,eAAe,EAClC,MAAM,oCAAoC,EAEjDA,EAAS,SAAW,GACpBA,EAAS,UAAU,IAAI,eAAe,EACtCM,EAAmBiB,CAEtB,CACH,EAEAC,EAAUzB,EAAUqB,CAAO"}